"use strict";(self.webpackChunktaskforce_frontend=self.webpackChunktaskforce_frontend||[]).push([[889],{178:(e,s,r)=>{r.d(s,{A:()=>a});r(43);var t=r(60),o=r(579);const a=()=>{(0,t.Zp)();return(0,o.jsx)("footer",{className:"footer",children:(0,o.jsxs)("div",{className:"footer-container",children:[(0,o.jsxs)("div",{className:"footer-content",children:[(0,o.jsxs)("div",{className:"footer-brand",children:[(0,o.jsxs)("div",{className:"logo",children:[(0,o.jsx)("div",{className:"logo-icon",children:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,o.jsx)("path",{d:"M7 9h6M7 12h4M7 15h8",stroke:"currentColor",strokeWidth:"2"})]})}),(0,o.jsx)("span",{children:"TaskForce"})]}),(0,o.jsx)("p",{children:"R\xe9partition intelligente des t\xe2ches pour \xe9quipes performantes"})]}),(0,o.jsxs)("div",{className:"footer-links",children:[(0,o.jsxs)("div",{className:"footer-section",children:[(0,o.jsx)("h4",{children:"Produit"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Fonctionnalit\xe9s"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Tarifs"})})]})]}),(0,o.jsxs)("div",{className:"footer-section",children:[(0,o.jsx)("h4",{children:"Support"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Aide"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Contact"})})]})]})]})]}),(0,o.jsxs)("div",{className:"footer-bottom",children:[(0,o.jsx)("p",{children:"\xa9 2024 TaskForce. Tous droits r\xe9serv\xe9s."}),(0,o.jsxs)("div",{className:"social-links",children:[(0,o.jsx)("a",{href:"#",className:"social-link",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),(0,o.jsx)("a",{href:"#",className:"social-link",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),(0,o.jsx)("a",{href:"#",className:"social-link",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.096.120.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.754-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})})})]})]})]})})}},742:(e,s,r)=>{r.d(s,{A:()=>l});var t=r(43),o=r(60),a=r(759),n=r(838),i=r(579);const l=()=>{const[e,s]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!1),u=(0,o.Zp)(),m=(0,o.zy)();(0,t.useEffect)((()=>{(async()=>{try{if(await a.A.isAuthenticated()){const s=await n.A.getProfile();c(!0);try{const{dashboardServices:e}=await r.e(202).then(r.bind(r,202)),t=await e.getProjects(),o=a.A.canAccessAdminGlobally(t.projects,s.id);h(o)}catch(e){console.error("Erreur lors de la v\xe9rification des permissions admin:",e),h(!1)}}else c(!1),h(!1)}catch(e){c(!1),h(!1)}})()}),[m.pathname]),(0,t.useEffect)((()=>{s(!1)}),[m.pathname]);return(0,i.jsx)("header",{className:"header",children:(0,i.jsxs)("div",{className:"header-container",children:[(0,i.jsxs)("div",{className:"header-left",children:[(0,i.jsxs)("div",{className:"logo",onClick:()=>u("/"),children:[(0,i.jsx)("div",{className:"logo-icon",children:(0,i.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M7 9h6M7 12h4M7 15h8",stroke:"currentColor",strokeWidth:"2"})]})}),(0,i.jsx)("span",{className:"logo-text",children:"TaskForce"})]}),(0,i.jsxs)("nav",{className:"nav-links ".concat(e?"mobile-open":""),children:[(0,i.jsx)("button",{className:"nav-link",children:"Fonctionnalit\xe9s"}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"nav-link",onClick:()=>u("/dashboard"),children:"Mes Tableaux"}),d&&(0,i.jsx)("button",{className:"nav-link",onClick:()=>u("/admin"),children:"Admin"}),(0,i.jsx)("button",{className:"nav-link",onClick:()=>u("/my-account"),children:"Mon Compte"})]})]})]}),(0,i.jsxs)("div",{className:"header-right",children:[l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"btn-login",onClick:()=>u("/dashboard"),children:"Mes Tableaux"}),d&&(0,i.jsx)("button",{className:"btn-admin",onClick:()=>u("/admin"),children:"Admin"}),(0,i.jsx)("button",{className:"btn-signup",onClick:()=>u("/account"),children:"Mon Compte"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"btn-login",onClick:()=>u("/login"),children:"Connexion"}),(0,i.jsx)("button",{className:"btn-signup",onClick:()=>u("/register"),children:"Cr\xe9er un compte"})]}),(0,i.jsxs)("button",{className:"mobile-menu-toggle",onClick:()=>{s(!e)},"aria-label":"Toggle mobile menu","aria-expanded":e,children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{})]})]})]})})}},759:(e,s,r)=>{r.d(s,{A:()=>h});var t=r(722);const o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000/api",a=t.A.create({baseURL:o,headers:{"Content-Type":"application/json"},timeout:1e4}),n=e=>{if(!e||"string"!==typeof e)return!1;try{const s=e.split(".");if(3!==s.length)return!1;const r=JSON.parse(atob(s[0]));if(!r.alg||!r.typ)return!1;const t=JSON.parse(atob(s[1])),o=Math.floor(Date.now()/1e3);return t.exp&&t.exp>o}catch(s){return console.error("Token validation error:",s),!1}},i=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refreshToken"),sessionStorage.clear(),document.cookie.split(";").forEach((e=>{const s=e.indexOf("="),r=s>-1?e.substr(0,s):e;document.cookie="".concat(r,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/")}))},l=e=>{var s,r;return e&&"object"===typeof e?{id:e.id,email:e.email,firstname:null===(s=e.firstname)||void 0===s?void 0:s.trim(),lastname:null===(r=e.lastname)||void 0===r?void 0:r.trim(),role:e.role}:null},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e5;const r=new Map;return t=>{const o=Date.now(),a=o-s;r.has(t)||r.set(t,[]);const n=r.get(t).filter((e=>e>a));if(n.length>=e)throw new Error("Trop de tentatives, veuillez patienter");n.push(o),r.set(t,n)}}(5,3e5);a.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(n(s)?e.headers.Authorization="Bearer ".concat(s):(console.warn("Token invalide d\xe9tect\xe9, nettoyage..."),i())),e.headers["X-Request-ID"]="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),e}),(e=>(console.error("Erreur intercepteur requ\xeate:",e),Promise.reject(e)))),a.interceptors.response.use((e=>e),(e=>{var s;const r=null===(s=e.response)||void 0===s?void 0:s.status;e.config;switch(r){case 401:console.warn("Token expir\xe9 ou invalide"),i();const s=["/login","/register","/","/home"],o=window.location.pathname;s.some((e=>o.includes(e)))||(sessionStorage.setItem("returnUrl",o),window.location.replace("/login"));break;case 403:console.error("Acc\xe8s refus\xe9:",e.response.data);break;case 429:console.warn("Rate limit atteint");break;case 422:console.error("Donn\xe9es invalides:",e.response.data);break;default:var t;if(r>=500)console.error("Erreur serveur:",null===(t=e.response)||void 0===t?void 0:t.data)}return Promise.reject(e)}));const d={register:async e=>{try{if(!e.email||!e.password||!e.firstname||!e.lastname)throw new Error("Tous les champs sont requis");if(e.password.length<8)throw new Error("Le mot de passe doit contenir au moins 8 caract\xe8res");if(!/[A-Z]/.test(e.password))throw new Error("Le mot de passe doit contenir au moins une majuscule");if(!/[0-9]/.test(e.password))throw new Error("Le mot de passe doit contenir au moins un chiffre");const s={email:e.email.trim().toLowerCase(),password:e.password,firstname:e.firstname.trim(),lastname:e.lastname.trim()};return(await a.post("/register",s)).data}catch(r){var s;throw console.error("Erreur inscription:",r),(null===(s=r.response)||void 0===s?void 0:s.data)||{message:r.message}}},login:async e=>{try{if(!e.email||!e.password)throw new Error("Email et mot de passe requis");c(e.email);const s={username:e.email.trim().toLowerCase(),password:e.password},r=await a.post("/login",s),{token:t,user:o,refreshToken:i}=r.data;if(!t||!n(t))throw new Error("Token invalide re\xe7u du serveur");if(localStorage.setItem("token",t),i&&n(i)&&localStorage.setItem("refreshToken",i),o){const e=l(o);e&&localStorage.setItem("user",JSON.stringify(e))}return r.data}catch(r){var s;throw console.error("Erreur connexion:",r),(null===(s=r.response)||void 0===s?void 0:s.data)||{message:r.message}}},logout:async()=>{try{const e=localStorage.getItem("token");e&&n(e)&&await a.post("/logout")}catch(e){console.error("Erreur lors de la d\xe9connexion serveur:",e)}finally{i(),window.location.replace("/login")}},hasToken:()=>{const e=localStorage.getItem("token");return e&&n(e)},isAuthenticated:async()=>{const e=localStorage.getItem("token");if(!e||!n(e))return i(),!1;try{const e=await a.get("/user");if(e.data&&e.data.id)return!0;throw new Error("R\xe9ponse utilisateur invalide")}catch(s){return console.warn("V\xe9rification authentification \xe9chou\xe9e:",s.message),i(),!1}},getToken:()=>{const e=localStorage.getItem("token");return n(e)?e:null},refreshToken:async()=>{try{const e=localStorage.getItem("refreshToken");if(!e||!n(e))throw new Error("Refresh token invalide");const s=await a.post("/refresh-token",{refreshToken:e}),{token:r}=s.data;if(!n(r))throw new Error("Nouveau token invalide");return localStorage.setItem("token",r),r}catch(e){throw console.error("Erreur refresh token:",e),i(),e}},getCurrentUser:()=>{try{const e=localStorage.getItem("user");if(!e)return null;const s=JSON.parse(e);return l(s)}catch(e){return console.error("Erreur parsing utilisateur:",e),localStorage.removeItem("user"),null}},canAccessAdmin:e=>e&&("manager"===e||"responsable_projet"===e),canModifyTasks:e=>"responsable_projet"===e,canManageUsers:e=>"responsable_projet"===e,canManageProject:e=>"responsable_projet"===e,isManager:e=>"manager"===e,isResponsableProjet:e=>"responsable_projet"===e,isCollaborateur:e=>"collaborateur"===e,canAccessAdminGlobally:(e,s)=>!!(e&&Array.isArray(e)&&s)&&e.some((e=>{const r=d.getUserRoleInProject(e,s);return"manager"===r||"responsable_projet"===r})),getAdminAccessibleProjects:(e,s)=>e&&Array.isArray(e)&&s?e.filter((e=>{const r=d.getUserRoleInProject(e,s);return"manager"===r||"responsable_projet"===r})):[],getUserRoleInProject:(e,s)=>{if(!e||!e.users||!s)return null;const r=e.users.find((e=>e.id===s));return(null===r||void 0===r?void 0:r.role)||null},getCurrentUserRole:()=>localStorage.getItem("currentUserRole"),setCurrentUserRole:e=>{e?localStorage.setItem("currentUserRole",e):localStorage.removeItem("currentUserRole")},validatePassword:e=>{const s=/[A-Z]/.test(e),r=/[a-z]/.test(e),t=/\d/.test(e),o=/[!@#$%^&*(),.?":{}|<>]/.test(e),a=[];return e.length<8&&a.push("Au moins ".concat(8," caract\xe8res")),s||a.push("Une majuscule"),r||a.push("Une minuscule"),t||a.push("Un chiffre"),o||a.push("Un caract\xe8re sp\xe9cial"),{isValid:0===a.length,errors:a,strength:0===a.length?"Fort":a.length<=2?"Moyen":"Faible"}}},h=d},838:(e,s,r)=>{r.d(s,{A:()=>o});const t=r(722).A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"},timeout:1e4});t.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.replace("/login")),Promise.reject(e)}));const o={getProfile:async()=>{try{return(await t.get("/user")).data}catch(s){var e;throw(null===(e=s.response)||void 0===e?void 0:e.data)||s.message}},updateProfile:async e=>{try{var s,r;const o=await t.put("/user",e);return null!==(s=null===(r=o.data)||void 0===r?void 0:r.user)&&void 0!==s?s:o.data}catch(a){var o;throw(null===(o=a.response)||void 0===o?void 0:o.data)||a.message}}}},889:(e,s,r)=>{r.r(s),r.d(s,{default:()=>d});var t=r(555),o=r(43),a=r(759),n=r(60),i=r(742),l=r(178),c=r(579);const d=()=>{const[e,s]=(0,o.useState)({email:"",password:""}),[r,d]=(0,o.useState)(!1),[h,u]=(0,o.useState)(""),m=r=>{s((0,t.A)((0,t.A)({},e),{},{[r.target.name]:r.target.value}))},p=(0,n.Zp)();return(0,c.jsxs)("div",{children:[(0,c.jsx)(i.A,{}),(0,c.jsx)("div",{className:"login-page",children:(0,c.jsxs)("div",{className:"login-container",children:[(0,c.jsxs)("div",{className:"login-form-text",children:[(0,c.jsxs)("div",{className:"decorative-elements",children:[(0,c.jsx)("div",{className:"circle-1"}),(0,c.jsx)("div",{className:"circle-2"}),(0,c.jsx)("div",{className:"dot-1"}),(0,c.jsx)("div",{className:"dot-2"}),(0,c.jsx)("div",{className:"dot-3"}),(0,c.jsx)("div",{className:"dot-4"}),(0,c.jsx)("div",{className:"dot-5"}),(0,c.jsx)("svg",{className:"organic-shape-1",viewBox:"0 0 100 100",children:(0,c.jsx)("path",{d:"M20,30 Q40,10 60,30 Q80,50 60,70 Q40,90 20,70 Q0,50 20,30 Z",fill:"currentColor"})}),(0,c.jsx)("svg",{className:"organic-shape-2",viewBox:"0 0 100 100",children:(0,c.jsx)("path",{d:"M30,20 Q50,0 70,20 Q90,40 70,60 Q50,80 30,60 Q10,40 30,20 Z",fill:"currentColor"})})]}),(0,c.jsx)("div",{className:"welcome-content",children:(0,c.jsxs)("div",{className:"welcome-text",children:[(0,c.jsx)("h1",{children:"Bon retour !"}),(0,c.jsx)("p",{children:"Vous pouvez vous connecter avec votre compte existant"})]})})]}),(0,c.jsxs)("div",{className:"login-form",children:[(0,c.jsx)("div",{className:"form-header",children:(0,c.jsx)("h2",{className:"login-title",children:"Connexion"})}),h&&(0,c.jsx)("div",{className:"error-message",role:"alert","aria-live":"polite",children:h}),(0,c.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),d(!0),u("");try{await a.A.login(e),p("/account")}catch(h){console.error("Erreur de connexion:",h),u("Erreur de connexion")}finally{d(!1)}},className:"login-form-container",children:[(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"email",className:"visually-hidden",children:"Email"}),(0,c.jsxs)("div",{className:"input-wrapper",children:[(0,c.jsx)("input",{id:"email",type:"email",name:"email",value:e.email,onChange:m,required:!0,placeholder:"Nom d'utilisateur ou email",className:"form-input","aria-describedby":"email-help",autoComplete:"email"}),(0,c.jsx)("div",{className:"input-icon","aria-hidden":"true",children:(0,c.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),(0,c.jsx)("div",{id:"email-help",className:"visually-hidden",children:"Saisissez votre adresse email"})]}),(0,c.jsxs)("div",{className:"input-group",children:[(0,c.jsx)("label",{htmlFor:"password",className:"visually-hidden",children:"Mot de passe"}),(0,c.jsxs)("div",{className:"input-wrapper",children:[(0,c.jsx)("input",{id:"password",type:"password",name:"password",value:e.password,onChange:m,required:!0,placeholder:"Mot de passe",className:"form-input","aria-describedby":"password-help",autoComplete:"current-password"}),(0,c.jsx)("div",{className:"input-icon","aria-hidden":"true",children:(0,c.jsx)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})]}),(0,c.jsx)("div",{id:"password-help",className:"visually-hidden",children:"Saisissez votre mot de passe"})]}),(0,c.jsx)("button",{type:"submit",className:"login-button",disabled:r,children:r?(0,c.jsxs)("div",{className:"loading-content",children:[(0,c.jsxs)("svg",{className:"spinner",viewBox:"0 0 24 24",children:[(0,c.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,c.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Connexion..."]}):"Se connecter"})]}),(0,c.jsxs)("p",{className:"login-footer",children:["Nouveau ici ?"," ",(0,c.jsx)("button",{type:"button",className:"link-button",onClick:()=>{p("/register")},"aria-label":"Cr\xe9er un nouveau compte",children:"Cr\xe9er un compte"})]})]})]})}),(0,c.jsx)(l.A,{})]})}}}]);
//# sourceMappingURL=889.19cfce85.chunk.js.map