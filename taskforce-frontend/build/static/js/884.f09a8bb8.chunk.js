"use strict";(self.webpackChunktaskforce_frontend=self.webpackChunktaskforce_frontend||[]).push([[884],{178:(e,r,s)=>{s.d(r,{A:()=>n});s(43);var t=s(60),o=s(579);const n=()=>{(0,t.Zp)();return(0,o.jsx)("footer",{className:"footer",children:(0,o.jsxs)("div",{className:"footer-container",children:[(0,o.jsxs)("div",{className:"footer-content",children:[(0,o.jsxs)("div",{className:"footer-brand",children:[(0,o.jsxs)("div",{className:"logo",children:[(0,o.jsx)("div",{className:"logo-icon",children:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,o.jsx)("path",{d:"M7 9h6M7 12h4M7 15h8",stroke:"currentColor",strokeWidth:"2"})]})}),(0,o.jsx)("span",{children:"TaskForce"})]}),(0,o.jsx)("p",{children:"R\xe9partition intelligente des t\xe2ches pour \xe9quipes performantes"})]}),(0,o.jsxs)("div",{className:"footer-links",children:[(0,o.jsxs)("div",{className:"footer-section",children:[(0,o.jsx)("h4",{children:"Produit"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Fonctionnalit\xe9s"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Tarifs"})})]})]}),(0,o.jsxs)("div",{className:"footer-section",children:[(0,o.jsx)("h4",{children:"Support"}),(0,o.jsxs)("ul",{children:[(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Aide"})}),(0,o.jsx)("li",{children:(0,o.jsx)("a",{href:"#",children:"Contact"})})]})]})]})]}),(0,o.jsxs)("div",{className:"footer-bottom",children:[(0,o.jsx)("p",{children:"\xa9 2024 TaskForce. Tous droits r\xe9serv\xe9s."}),(0,o.jsxs)("div",{className:"social-links",children:[(0,o.jsx)("a",{href:"#",className:"social-link",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),(0,o.jsx)("a",{href:"#",className:"social-link",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),(0,o.jsx)("a",{href:"#",className:"social-link",children:(0,o.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.096.120.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.754-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})})})]})]})]})})}},742:(e,r,s)=>{s.d(r,{A:()=>l});var t=s(43),o=s(60),n=s(759),a=s(838),i=s(579);const l=()=>{const[e,r]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[d,u]=(0,t.useState)(!1),h=(0,o.Zp)(),m=(0,o.zy)();(0,t.useEffect)((()=>{(async()=>{try{if(await n.A.isAuthenticated()){const r=await a.A.getProfile();c(!0);try{const{dashboardServices:e}=await s.e(202).then(s.bind(s,202)),t=await e.getProjects(),o=n.A.canAccessAdminGlobally(t.projects,r.id);u(o)}catch(e){console.error("Erreur lors de la v\xe9rification des permissions admin:",e),u(!1)}}else c(!1),u(!1)}catch(e){c(!1),u(!1)}})()}),[m.pathname]),(0,t.useEffect)((()=>{r(!1)}),[m.pathname]);return(0,i.jsx)("header",{className:"header",children:(0,i.jsxs)("div",{className:"header-container",children:[(0,i.jsxs)("div",{className:"header-left",children:[(0,i.jsxs)("div",{className:"logo",onClick:()=>h("/"),children:[(0,i.jsx)("div",{className:"logo-icon",children:(0,i.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",children:[(0,i.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,i.jsx)("path",{d:"M7 9h6M7 12h4M7 15h8",stroke:"currentColor",strokeWidth:"2"})]})}),(0,i.jsx)("span",{className:"logo-text",children:"TaskForce"})]}),(0,i.jsxs)("nav",{className:"nav-links ".concat(e?"mobile-open":""),children:[(0,i.jsx)("button",{className:"nav-link",children:"Fonctionnalit\xe9s"}),l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"nav-link",onClick:()=>h("/dashboard"),children:"Mes Tableaux"}),d&&(0,i.jsx)("button",{className:"nav-link",onClick:()=>h("/admin"),children:"Admin"}),(0,i.jsx)("button",{className:"nav-link",onClick:()=>h("/my-account"),children:"Mon Compte"})]})]})]}),(0,i.jsxs)("div",{className:"header-right",children:[l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"btn-login",onClick:()=>h("/dashboard"),children:"Mes Tableaux"}),d&&(0,i.jsx)("button",{className:"btn-admin",onClick:()=>h("/admin"),children:"Admin"}),(0,i.jsx)("button",{className:"btn-signup",onClick:()=>h("/account"),children:"Mon Compte"})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{className:"btn-login",onClick:()=>h("/login"),children:"Connexion"}),(0,i.jsx)("button",{className:"btn-signup",onClick:()=>h("/register"),children:"Cr\xe9er un compte"})]}),(0,i.jsxs)("button",{className:"mobile-menu-toggle",onClick:()=>{r(!e)},"aria-label":"Toggle mobile menu","aria-expanded":e,children:[(0,i.jsx)("span",{}),(0,i.jsx)("span",{}),(0,i.jsx)("span",{})]})]})]})})}},759:(e,r,s)=>{s.d(r,{A:()=>u});var t=s(722);const o={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000/api",n=t.A.create({baseURL:o,headers:{"Content-Type":"application/json"},timeout:1e4}),a=e=>{if(!e||"string"!==typeof e)return!1;try{const r=e.split(".");if(3!==r.length)return!1;const s=JSON.parse(atob(r[0]));if(!s.alg||!s.typ)return!1;const t=JSON.parse(atob(r[1])),o=Math.floor(Date.now()/1e3);return t.exp&&t.exp>o}catch(r){return console.error("Token validation error:",r),!1}},i=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refreshToken"),sessionStorage.clear(),document.cookie.split(";").forEach((e=>{const r=e.indexOf("="),s=r>-1?e.substr(0,r):e;document.cookie="".concat(s,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/")}))},l=e=>{var r,s;return e&&"object"===typeof e?{id:e.id,email:e.email,firstname:null===(r=e.firstname)||void 0===r?void 0:r.trim(),lastname:null===(s=e.lastname)||void 0===s?void 0:s.trim(),role:e.role}:null},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e5;const s=new Map;return t=>{const o=Date.now(),n=o-r;s.has(t)||s.set(t,[]);const a=s.get(t).filter((e=>e>n));if(a.length>=e)throw new Error("Trop de tentatives, veuillez patienter");a.push(o),s.set(t,a)}}(5,3e5);n.interceptors.request.use((e=>{const r=localStorage.getItem("token");return r&&(a(r)?e.headers.Authorization="Bearer ".concat(r):(console.warn("Token invalide d\xe9tect\xe9, nettoyage..."),i())),e.headers["X-Request-ID"]="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),e}),(e=>(console.error("Erreur intercepteur requ\xeate:",e),Promise.reject(e)))),n.interceptors.response.use((e=>e),(e=>{var r;const s=null===(r=e.response)||void 0===r?void 0:r.status;e.config;switch(s){case 401:console.warn("Token expir\xe9 ou invalide"),i();const r=["/login","/register","/","/home"],o=window.location.pathname;r.some((e=>o.includes(e)))||(sessionStorage.setItem("returnUrl",o),window.location.replace("/login"));break;case 403:console.error("Acc\xe8s refus\xe9:",e.response.data);break;case 429:console.warn("Rate limit atteint");break;case 422:console.error("Donn\xe9es invalides:",e.response.data);break;default:var t;if(s>=500)console.error("Erreur serveur:",null===(t=e.response)||void 0===t?void 0:t.data)}return Promise.reject(e)}));const d={register:async e=>{try{if(!e.email||!e.password||!e.firstname||!e.lastname)throw new Error("Tous les champs sont requis");if(e.password.length<8)throw new Error("Le mot de passe doit contenir au moins 8 caract\xe8res");if(!/[A-Z]/.test(e.password))throw new Error("Le mot de passe doit contenir au moins une majuscule");if(!/[0-9]/.test(e.password))throw new Error("Le mot de passe doit contenir au moins un chiffre");const r={email:e.email.trim().toLowerCase(),password:e.password,firstname:e.firstname.trim(),lastname:e.lastname.trim()};return(await n.post("/register",r)).data}catch(s){var r;throw console.error("Erreur inscription:",s),(null===(r=s.response)||void 0===r?void 0:r.data)||{message:s.message}}},login:async e=>{try{if(!e.email||!e.password)throw new Error("Email et mot de passe requis");c(e.email);const r={username:e.email.trim().toLowerCase(),password:e.password},s=await n.post("/login",r),{token:t,user:o,refreshToken:i}=s.data;if(!t||!a(t))throw new Error("Token invalide re\xe7u du serveur");if(localStorage.setItem("token",t),i&&a(i)&&localStorage.setItem("refreshToken",i),o){const e=l(o);e&&localStorage.setItem("user",JSON.stringify(e))}return s.data}catch(s){var r;throw console.error("Erreur connexion:",s),(null===(r=s.response)||void 0===r?void 0:r.data)||{message:s.message}}},logout:async()=>{try{const e=localStorage.getItem("token");e&&a(e)&&await n.post("/logout")}catch(e){console.error("Erreur lors de la d\xe9connexion serveur:",e)}finally{i(),window.location.replace("/login")}},hasToken:()=>{const e=localStorage.getItem("token");return e&&a(e)},isAuthenticated:async()=>{const e=localStorage.getItem("token");if(!e||!a(e))return i(),!1;try{const e=await n.get("/user");if(e.data&&e.data.id)return!0;throw new Error("R\xe9ponse utilisateur invalide")}catch(r){return console.warn("V\xe9rification authentification \xe9chou\xe9e:",r.message),i(),!1}},getToken:()=>{const e=localStorage.getItem("token");return a(e)?e:null},refreshToken:async()=>{try{const e=localStorage.getItem("refreshToken");if(!e||!a(e))throw new Error("Refresh token invalide");const r=await n.post("/refresh-token",{refreshToken:e}),{token:s}=r.data;if(!a(s))throw new Error("Nouveau token invalide");return localStorage.setItem("token",s),s}catch(e){throw console.error("Erreur refresh token:",e),i(),e}},getCurrentUser:()=>{try{const e=localStorage.getItem("user");if(!e)return null;const r=JSON.parse(e);return l(r)}catch(e){return console.error("Erreur parsing utilisateur:",e),localStorage.removeItem("user"),null}},canAccessAdmin:e=>e&&("manager"===e||"responsable_projet"===e),canModifyTasks:e=>"responsable_projet"===e,canManageUsers:e=>"responsable_projet"===e,canManageProject:e=>"responsable_projet"===e,isManager:e=>"manager"===e,isResponsableProjet:e=>"responsable_projet"===e,isCollaborateur:e=>"collaborateur"===e,canAccessAdminGlobally:(e,r)=>!!(e&&Array.isArray(e)&&r)&&e.some((e=>{const s=d.getUserRoleInProject(e,r);return"manager"===s||"responsable_projet"===s})),getAdminAccessibleProjects:(e,r)=>e&&Array.isArray(e)&&r?e.filter((e=>{const s=d.getUserRoleInProject(e,r);return"manager"===s||"responsable_projet"===s})):[],getUserRoleInProject:(e,r)=>{if(!e||!e.users||!r)return null;const s=e.users.find((e=>e.id===r));return(null===s||void 0===s?void 0:s.role)||null},getCurrentUserRole:()=>localStorage.getItem("currentUserRole"),setCurrentUserRole:e=>{e?localStorage.setItem("currentUserRole",e):localStorage.removeItem("currentUserRole")},validatePassword:e=>{const r=/[A-Z]/.test(e),s=/[a-z]/.test(e),t=/\d/.test(e),o=/[!@#$%^&*(),.?":{}|<>]/.test(e),n=[];return e.length<8&&n.push("Au moins ".concat(8," caract\xe8res")),r||n.push("Une majuscule"),s||n.push("Une minuscule"),t||n.push("Un chiffre"),o||n.push("Un caract\xe8re sp\xe9cial"),{isValid:0===n.length,errors:n,strength:0===n.length?"Fort":n.length<=2?"Moyen":"Faible"}}},u=d},838:(e,r,s)=>{s.d(r,{A:()=>o});const t=s(722).A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"},timeout:1e4});t.interceptors.request.use((e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e}),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>{var r;return 401===(null===(r=e.response)||void 0===r?void 0:r.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.replace("/login")),Promise.reject(e)}));const o={getProfile:async()=>{try{return(await t.get("/user")).data}catch(r){var e;throw(null===(e=r.response)||void 0===e?void 0:e.data)||r.message}},updateProfile:async e=>{try{var r,s;const o=await t.put("/user",e);return null!==(r=null===(s=o.data)||void 0===s?void 0:s.user)&&void 0!==r?r:o.data}catch(n){var o;throw(null===(o=n.response)||void 0===o?void 0:o.data)||n.message}}}},884:(e,r,s)=>{s.r(r),s.d(r,{default:()=>i});s(43);var t=s(60),o=s(742),n=s(178),a=s(579);const i=()=>{const e=(0,t.Zp)();return(0,a.jsxs)("div",{className:"not-found-container",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("main",{className:"not-found-main",children:(0,a.jsxs)("div",{className:"not-found-content",children:[(0,a.jsx)("div",{className:"error-code",children:"404"}),(0,a.jsx)("h1",{children:"Page non trouv\xe9e"}),(0,a.jsx)("p",{children:"D\xe9sol\xe9, la page que vous recherchez n'existe pas ou a \xe9t\xe9 d\xe9plac\xe9e."}),(0,a.jsxs)("div",{className:"not-found-actions",children:[(0,a.jsx)("button",{className:"btn-primary",onClick:()=>{e("/")},children:"Retour \xe0 l'accueil"}),(0,a.jsx)("button",{className:"btn-secondary",onClick:()=>{e(-1)},children:"Page pr\xe9c\xe9dente"})]})]})}),(0,a.jsx)(n.A,{})]})}}}]);
//# sourceMappingURL=884.f09a8bb8.chunk.js.map