"use strict";(self.webpackChunktaskforce_frontend=self.webpackChunktaskforce_frontend||[]).push([[202,769],{178:(e,s,t)=>{t.d(s,{A:()=>l});t(43);var r=t(60),a=t(579);const l=()=>{(0,r.Zp)();return(0,a.jsx)("footer",{className:"footer",children:(0,a.jsxs)("div",{className:"footer-container",children:[(0,a.jsxs)("div",{className:"footer-content",children:[(0,a.jsxs)("div",{className:"footer-brand",children:[(0,a.jsxs)("div",{className:"logo",children:[(0,a.jsx)("div",{className:"logo-icon",children:(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,a.jsx)("path",{d:"M7 9h6M7 12h4M7 15h8",stroke:"currentColor",strokeWidth:"2"})]})}),(0,a.jsx)("span",{children:"TaskForce"})]}),(0,a.jsx)("p",{children:"R\xe9partition intelligente des t\xe2ches pour \xe9quipes performantes"})]}),(0,a.jsxs)("div",{className:"footer-links",children:[(0,a.jsxs)("div",{className:"footer-section",children:[(0,a.jsx)("h4",{children:"Produit"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Fonctionnalit\xe9s"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Tarifs"})})]})]}),(0,a.jsxs)("div",{className:"footer-section",children:[(0,a.jsx)("h4",{children:"Support"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Aide"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Contact"})})]})]})]})]}),(0,a.jsxs)("div",{className:"footer-bottom",children:[(0,a.jsx)("p",{children:"\xa9 2024 TaskForce. Tous droits r\xe9serv\xe9s."}),(0,a.jsxs)("div",{className:"social-links",children:[(0,a.jsx)("a",{href:"#",className:"social-link",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),(0,a.jsx)("a",{href:"#",className:"social-link",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),(0,a.jsx)("a",{href:"#",className:"social-link",children:(0,a.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.096.120.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.754-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})})})]})]})]})})}},189:()=>{},202:(e,s,t)=>{t.d(s,{dashboardServices:()=>n});var r=t(555);const a="http://localhost:8000/api",l=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=localStorage.getItem("token"),a={headers:(0,r.A)({Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},s.headers)},l=await fetch(e,(0,r.A)((0,r.A)({},a),s));if(!l.ok){const t=await l.json().catch((()=>({})));console.error("API Error:",{url:e,status:l.status,errorData:t,body:s.body});const r=new Error(t.message||t.error||"HTTP error! status: ".concat(l.status));throw r.status=l.status,r.errorData=t,r}return l.json()},n={getProjects:async()=>l("".concat(a,"/projects")),createProject:async e=>l("".concat(a,"/projects"),{method:"POST",body:JSON.stringify(e)}),updateProject:async(e,s)=>l("".concat(a,"/projects/").concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteProject:async e=>l("".concat(a,"/projects/").concat(e),{method:"DELETE"}),addUserToProject:async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"member";return l("".concat(a,"/projects/").concat(e,"/add-user"),{method:"POST",body:JSON.stringify({email:s,role:t})})},updateUserRole:async(e,s,t)=>l("".concat(a,"/projects/").concat(e,"/update-user-role"),{method:"PUT",body:JSON.stringify({userId:s,role:t})}),removeUserFromProject:async(e,s)=>l("".concat(a,"/projects/").concat(e,"/remove-user"),{method:"DELETE",body:JSON.stringify({userId:s})}),getTasks:async e=>{const s=e?"".concat(a,"/tasks?projectId=").concat(e):"".concat(a,"/tasks");return l(s)},createTask:async e=>l("".concat(a,"/tasks"),{method:"POST",body:JSON.stringify(e)}),updateTask:async(e,s)=>l("".concat(a,"/tasks/").concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteTask:async e=>l("".concat(a,"/tasks/").concat(e),{method:"DELETE"}),uploadTaskImage:async(e,s)=>{const t=localStorage.getItem("token"),r=new FormData;r.append("image",s);const l=await fetch("".concat(a,"/tasks/").concat(e,"/upload-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:r});if(!l.ok){const e=await l.json().catch((()=>({})));throw new Error(e.message||"HTTP error! status: ".concat(l.status))}return l.json()},deleteTaskImage:async(e,s)=>l("".concat(a,"/tasks/").concat(e,"/delete-image"),{method:"DELETE",body:JSON.stringify({imagePath:s})}),addSkillsToTask:async(e,s)=>l("".concat(a,"/tasks/").concat(e,"/add-skills"),{method:"POST",body:JSON.stringify({skillIds:s})}),assignTaskAutomatically:async e=>l("".concat(a,"/tasks/").concat(e,"/assign"),{method:"POST"}),assignAllProjectTasks:async e=>l("".concat(a,"/tasks/project/").concat(e,"/assign-all"),{method:"POST"}),getProjectWorkload:async e=>l("".concat(a,"/tasks/project/").concat(e,"/workload")),getColumns:async e=>l("".concat(a,"/columns?projectId=").concat(e)),createColumn:async e=>l("".concat(a,"/columns"),{method:"POST",body:JSON.stringify(e)}),updateColumn:async(e,s)=>l("".concat(a,"/columns/").concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteColumn:async e=>l("".concat(a,"/columns/").concat(e),{method:"DELETE"}),getSkills:async()=>l("".concat(a,"/skills")),createSkill:async e=>l("".concat(a,"/skills"),{method:"POST",body:JSON.stringify(e)}),updateSkill:async(e,s)=>l("".concat(a,"/skills/").concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteSkill:async e=>l("".concat(a,"/skills/").concat(e),{method:"DELETE"}),getUsers:async()=>l("".concat(a,"/users")),getAllUsers:async()=>l("".concat(a,"/users")),getProjectUsers:async e=>l("".concat(a,"/projects/").concat(e,"/users")),getProfile:async()=>l("".concat(a,"/user")),getUserSkills:async()=>l("".concat(a,"/user-skills")),getUserSkillsByUserId:async e=>l("".concat(a,"/users/").concat(e,"/skills")),addUserSkill:async e=>l("".concat(a,"/user-skills"),{method:"POST",body:JSON.stringify(e)}),updateUserSkill:async(e,s)=>l("".concat(a,"/user-skills/").concat(e),{method:"PUT",body:JSON.stringify(s)}),deleteUserSkill:async e=>l("".concat(a,"/user-skills/skill/").concat(e),{method:"DELETE"}),getProjectUserSkills:async e=>l("".concat(a,"/projects/").concat(e,"/skills/users")),getAllAvailableProjectSkills:async e=>l("".concat(a,"/projects/").concat(e,"/skills/available")),createProjectSkill:async(e,s)=>l("".concat(a,"/projects/").concat(e,"/skills"),{method:"POST",body:JSON.stringify(s)}),deleteProjectSkill:async e=>l("".concat(a,"/projects/skills/").concat(e),{method:"DELETE"})}},367:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(555),a=t(43),l=t(202),n=t(759),o=(t(189),t(579));const i=e=>{let{task:s,isOpen:t,onClose:i,onTaskUpdate:c,project:d,mode:u="view",currentUserRole:m}=e;const[h,p]=(0,a.useState)("edit"===u),[j,g]=(0,a.useState)({title:"",description:"",priority:"medium",status:"",level:"intermediate",estimatedHours:1,skillIds:[]}),[v,x]=(0,a.useState)([]),[k,y]=(0,a.useState)([]),[f,b]=(0,a.useState)({name:"",category:"G\xe9n\xe9ral",level:1}),[N,S]=(0,a.useState)(!1),[w,A]=(0,a.useState)(null),[C,T]=(0,a.useState)(!1),[I,E]=(0,a.useState)([]),[P,O]=(0,a.useState)(""),[U,D]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(s){const e=s.requiredSkills?s.requiredSkills.map((e=>e.id)):[];g({title:s.title||"",description:s.description||"",priority:s.priority||"medium",status:s.status||"",level:s.level||"intermediate",estimatedHours:s.estimatedHours||1,skillIds:e}),E(Array.isArray(null===s||void 0===s?void 0:s.images)?s.images:[])}if(t){q(),H();const e=JSON.parse(localStorage.getItem("user"));D(e)}}),[s,t]),(0,a.useEffect)((()=>{if(t){const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}}),[t]);const q=async()=>{try{if(d&&d.id){const e=(await l.dashboardServices.getAllAvailableProjectSkills(d.id)).skills||[];if(s&&s.requiredSkills){const t=s.requiredSkills.filter((s=>!e.some((e=>e.id===s.id))));t.length>0?x([...e,...t]):x(e)}else x(e)}}catch(e){console.error("Erreur lors du chargement des comp\xe9tences:",e)}},H=async()=>{try{const e=await l.dashboardServices.getColumns(d.id);y(e.columns)}catch(e){console.error("Erreur lors du chargement des colonnes:",e)}},F=e=>{const{name:s,value:t}=e.target;g((e=>(0,r.A)((0,r.A)({},e),{},{[s]:"estimatedHours"===s?parseFloat(t)||1:t})))},M=async e=>{T(!0);try{const t=await l.dashboardServices.uploadTaskImage(s.id,e);if(t.success){const e="object"===typeof t.image?t.image.path||t.image.filename:t.image;E((s=>[...s,e])),O("Image ajout\xe9e avec succ\xe8s"),setTimeout((()=>O("")),3e3)}}catch(t){console.error("Erreur lors de l'upload:",t),O("Erreur lors de l'upload de l'image"),setTimeout((()=>O("")),3e3)}finally{T(!1)}};return t&&s?(0,o.jsxs)("div",{className:"modal-overlay",onClick:i,children:[(0,o.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h2",{children:h?"Modifier la t\xe2che":"D\xe9tails de la t\xe2che"}),(0,o.jsxs)("div",{className:"header-actions",children:[!h&&n.A.canModifyTasks(m)&&(0,o.jsx)("button",{className:"btn-edit",onClick:()=>p(!0),title:"Modifier cette t\xe2che",children:"Modifier"}),(0,o.jsx)("button",{className:"modal-close",onClick:i,children:"\xd7"})]})]}),h?(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),j.title.trim())try{await c(s.id,j),p(!1)}catch(t){console.error("Erreur lors de la mise \xe0 jour:",t)}else alert("Le titre est requis")},className:"modal-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"title",children:"Titre *"}),(0,o.jsx)("input",{type:"text",id:"title",name:"title",value:j.title,onChange:F,placeholder:"Titre de la t\xe2che",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"description",children:"Description"}),(0,o.jsx)("textarea",{id:"description",name:"description",value:j.description,onChange:F,placeholder:"Description de la t\xe2che",rows:"4"})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"priority",children:"Priorit\xe9"}),(0,o.jsxs)("select",{id:"priority",name:"priority",value:j.priority,onChange:F,children:[(0,o.jsx)("option",{value:"low",children:"Basse"}),(0,o.jsx)("option",{value:"medium",children:"Moyenne"}),(0,o.jsx)("option",{value:"high",children:"Haute"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,o.jsx)("select",{id:"status",name:"status",value:j.status,onChange:F,children:k.map((e=>(0,o.jsx)("option",{value:e.identifier,children:e.name},e.id)))})]})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"level",children:"Niveau requis"}),(0,o.jsxs)("select",{id:"level",name:"level",value:j.level,onChange:F,children:[(0,o.jsx)("option",{value:"beginner",children:"D\xe9butant"}),(0,o.jsx)("option",{value:"intermediate",children:"Interm\xe9diaire"}),(0,o.jsx)("option",{value:"advanced",children:"Avanc\xe9"}),(0,o.jsx)("option",{value:"expert",children:"Expert"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{htmlFor:"estimatedHours",children:"Heures estim\xe9es *"}),(0,o.jsx)("input",{type:"number",id:"estimatedHours",name:"estimatedHours",min:"0.5",max:"200",step:"0.5",value:j.estimatedHours,onChange:F,required:!0,placeholder:"Ex: 8"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Comp\xe9tences requises"}),0===j.skillIds.length&&(0,o.jsx)("p",{className:"no-skills-message",children:"Aucune comp\xe9tence s\xe9lectionn\xe9e. Cliquez sur les \xe9tiquettes pour les s\xe9lectionner."}),(0,o.jsx)("div",{className:"skills-labels-container",children:Array.isArray(v)&&v.map((e=>{const s=j.skillIds.includes(e.id),t=(e=>!(!U||!e.createdBy)&&"project_skill"===e.type&&e.createdBy.id===U.id)(e);return(0,o.jsxs)("div",{className:"skill-label ".concat(s?"selected":""," ").concat("project_skill"===e.type?"project-skill":"user-skill"),onClick:()=>{return s=e.id,void g((e=>(0,r.A)((0,r.A)({},e),{},{skillIds:e.skillIds.includes(s)?e.skillIds.filter((e=>e!==s)):[...e.skillIds,s]})));var s},children:[(0,o.jsx)("span",{className:"skill-label-name",children:e.name}),"project_skill"===e.type&&(0,o.jsx)("span",{className:"skill-type-badge",children:"Projet"}),t&&(0,o.jsx)("button",{type:"button",className:"skill-delete-btn",onClick:s=>{s.stopPropagation(),(async e=>{try{await l.dashboardServices.deleteProjectSkill(e),x((s=>s.filter((s=>s.id!==e)))),g((s=>(0,r.A)((0,r.A)({},s),{},{skillIds:s.skillIds.filter((s=>s!==e))})))}catch(s){console.error("Erreur lors de la suppression de la comp\xe9tence:",s)}})(e.id)},title:"Supprimer cette comp\xe9tence",children:"\xd7"}),s&&(0,o.jsx)("span",{className:"skill-label-check",children:"\u2713"})]},e.id)}))}),!!U&&["responsable_projet","manager"].includes(U.role)&&(0,o.jsx)("div",{className:"skill-management",children:N?(0,o.jsxs)("div",{className:"add-skill-form",children:[(0,o.jsx)("h4",{children:"Cr\xe9er une nouvelle comp\xe9tence"}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Nom de la comp\xe9tence"}),(0,o.jsx)("input",{type:"text",value:f.name,onChange:e=>b((s=>(0,r.A)((0,r.A)({},s),{},{name:e.target.value}))),placeholder:"Ex: React, Symfony..."})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Cat\xe9gorie"}),(0,o.jsxs)("select",{value:f.category,onChange:e=>b((s=>(0,r.A)((0,r.A)({},s),{},{category:e.target.value}))),children:[(0,o.jsx)("option",{value:"G\xe9n\xe9ral",children:"G\xe9n\xe9ral"}),(0,o.jsx)("option",{value:"Frontend",children:"Frontend"}),(0,o.jsx)("option",{value:"Backend",children:"Backend"}),(0,o.jsx)("option",{value:"DevOps",children:"DevOps"}),(0,o.jsx)("option",{value:"Design",children:"Design"})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Niveau"}),(0,o.jsxs)("select",{value:f.level,onChange:e=>b((s=>(0,r.A)((0,r.A)({},s),{},{level:parseInt(e.target.value)}))),children:[(0,o.jsx)("option",{value:1,children:"1 - D\xe9butant"}),(0,o.jsx)("option",{value:2,children:"2 - Interm\xe9diaire"}),(0,o.jsx)("option",{value:3,children:"3 - Avanc\xe9"}),(0,o.jsx)("option",{value:4,children:"4 - Expert"}),(0,o.jsx)("option",{value:5,children:"5 - Ma\xeetre"})]})]})]}),(0,o.jsxs)("div",{className:"form-actions",children:[(0,o.jsx)("button",{type:"button",onClick:async()=>{try{const e=await l.dashboardServices.createProjectSkill(d.id,f);x((s=>[...s,e.skill])),g((s=>(0,r.A)((0,r.A)({},s),{},{skillIds:[...s.skillIds,e.skill.id]}))),b({name:"",category:"G\xe9n\xe9ral",level:1}),S(!1)}catch(e){console.error("Erreur lors de la cr\xe9ation de la comp\xe9tence:",e)}},disabled:!f.name.trim(),children:"Cr\xe9er"}),(0,o.jsx)("button",{type:"button",onClick:()=>S(!1),children:"Annuler"})]})]}):(0,o.jsx)("button",{type:"button",className:"btn-add-skill",onClick:()=>S(!0),children:"+ Ajouter une comp\xe9tence au projet"})})]}),(0,o.jsxs)("div",{className:"modal-actions",children:[(0,o.jsx)("button",{type:"button",onClick:()=>p(!1),className:"btn-secondary",children:"Annuler"}),(0,o.jsx)("button",{type:"submit",className:"btn-primary",children:"Enregistrer"})]})]}):(0,o.jsxs)("div",{className:"modal-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Titre"}),(0,o.jsx)("div",{className:"task-display-value",children:s.title})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Description"}),(0,o.jsx)("div",{className:"task-display-value",children:s.description||"Aucune description"})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Priorit\xe9"}),(0,o.jsx)("div",{className:"task-display-value",children:(0,o.jsx)("span",{className:"priority-badge",style:{backgroundColor:(e=>{switch(e){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}})(s.priority)},children:(e=>{switch(e){case"high":return"Haute";case"medium":return"Moyenne";case"low":return"Basse";default:return"Non d\xe9finie"}})(s.priority)})})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Statut"}),(0,o.jsx)("div",{className:"task-display-value",children:s.status||"Non d\xe9fini"})]})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Niveau requis"}),(0,o.jsx)("div",{className:"task-display-value",children:(0,o.jsx)("span",{className:"level-badge",children:(e=>{switch(e){case"beginner":return"D\xe9butant";case"intermediate":return"Interm\xe9diaire";case"advanced":return"Avanc\xe9";case"expert":return"Expert";default:return"Non d\xe9fini"}})(s.level)})})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Heures estim\xe9es"}),(0,o.jsx)("div",{className:"task-display-value",children:(0,o.jsxs)("span",{className:"hours-badge",children:[s.estimatedHours||1,"h"]})})]})]}),(0,o.jsxs)("div",{className:"form-row",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Cr\xe9\xe9 le"}),(0,o.jsx)("div",{className:"task-display-value",children:(_=s.createdAt,new Date(_).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),s.assignedTo&&(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Assign\xe9e \xe0"}),(0,o.jsx)("div",{className:"task-display-value",children:"object"===typeof s.assignedTo?"".concat(s.assignedTo.firstname," ").concat(s.assignedTo.lastname):s.assignedTo})]})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Comp\xe9tences requises"}),s.requiredSkills&&s.requiredSkills.length>0?(0,o.jsx)("div",{className:"skills-labels-container",children:s.requiredSkills.map((e=>(0,o.jsxs)("div",{className:"skill-label selected ".concat("project_skill"===e.type?"project-skill":"user-skill"),children:[(0,o.jsx)("span",{className:"skill-label-name",children:e.name}),"project_skill"===e.type&&(0,o.jsx)("span",{className:"skill-type-badge",children:"Projet"}),(0,o.jsx)("span",{className:"skill-label-check",children:"\u2713"})]},e.id)))}):(0,o.jsx)("div",{className:"task-display-value",children:"Aucune comp\xe9tence requise"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{children:"Images"}),I.length>0?(0,o.jsx)("div",{className:"images-grid",children:I.filter((e=>e&&"string"===typeof e)).map(((e,t)=>(0,o.jsxs)("div",{className:"image-item",children:[(0,o.jsx)("img",{src:"http://localhost:8000/".concat(e),alt:"Task image",onClick:()=>A("http://localhost:8000/".concat(e))}),(0,o.jsx)("button",{className:"delete-image-btn",onClick:()=>(async e=>{try{const t=I[e];await l.dashboardServices.deleteTaskImage(s.id,t),E((s=>s.filter(((s,t)=>t!==e)))),O("Image supprim\xe9e avec succ\xe8s"),setTimeout((()=>O("")),3e3)}catch(t){console.error("Erreur lors de la suppression:",t),O("Erreur lors de la suppression de l'image"),setTimeout((()=>O("")),3e3)}})(t),title:"Supprimer cette image",children:"\xd7"})]},"image-".concat(t))))}):(0,o.jsx)("div",{className:"task-display-value",children:"Aucune image"}),(0,o.jsxs)("div",{className:"upload-section",children:[(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const s=e.target.files[0];s&&await M(s)},disabled:C,id:"image-upload",style:{display:"none"}}),(0,o.jsx)("label",{htmlFor:"image-upload",className:"upload-btn",children:C?"Upload en cours...":"+ Ajouter une image"})]})]}),P&&(0,o.jsx)("div",{className:"message",children:P})]})]}),w&&(0,o.jsx)("div",{className:"image-overlay",onClick:()=>A(null),children:(0,o.jsx)("img",{src:w,alt:"Full size"})})]}):null;var _}},742:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(43),a=t(60),l=t(759),n=t(838),o=t(579);const i=()=>{const[e,s]=(0,r.useState)(!1),[i,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),m=(0,a.Zp)(),h=(0,a.zy)();(0,r.useEffect)((()=>{(async()=>{try{if(await l.A.isAuthenticated()){const s=await n.A.getProfile();c(!0);try{const{dashboardServices:e}=await t.e(202).then(t.bind(t,202)),r=await e.getProjects(),a=l.A.canAccessAdminGlobally(r.projects,s.id);u(a)}catch(e){console.error("Erreur lors de la v\xe9rification des permissions admin:",e),u(!1)}}else c(!1),u(!1)}catch(e){c(!1),u(!1)}})()}),[h.pathname]),(0,r.useEffect)((()=>{s(!1)}),[h.pathname]);return(0,o.jsx)("header",{className:"header",children:(0,o.jsxs)("div",{className:"header-container",children:[(0,o.jsxs)("div",{className:"header-left",children:[(0,o.jsxs)("div",{className:"logo",onClick:()=>m("/"),children:[(0,o.jsx)("div",{className:"logo-icon",children:(0,o.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",children:[(0,o.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,o.jsx)("path",{d:"M7 9h6M7 12h4M7 15h8",stroke:"currentColor",strokeWidth:"2"})]})}),(0,o.jsx)("span",{className:"logo-text",children:"TaskForce"})]}),(0,o.jsxs)("nav",{className:"nav-links ".concat(e?"mobile-open":""),children:[(0,o.jsx)("button",{className:"nav-link",children:"Fonctionnalit\xe9s"}),i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"nav-link",onClick:()=>m("/dashboard"),children:"Mes Tableaux"}),d&&(0,o.jsx)("button",{className:"nav-link",onClick:()=>m("/admin"),children:"Admin"}),(0,o.jsx)("button",{className:"nav-link",onClick:()=>m("/my-account"),children:"Mon Compte"})]})]})]}),(0,o.jsxs)("div",{className:"header-right",children:[i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"btn-login",onClick:()=>m("/dashboard"),children:"Mes Tableaux"}),d&&(0,o.jsx)("button",{className:"btn-admin",onClick:()=>m("/admin"),children:"Admin"}),(0,o.jsx)("button",{className:"btn-signup",onClick:()=>m("/account"),children:"Mon Compte"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"btn-login",onClick:()=>m("/login"),children:"Connexion"}),(0,o.jsx)("button",{className:"btn-signup",onClick:()=>m("/register"),children:"Cr\xe9er un compte"})]}),(0,o.jsxs)("button",{className:"mobile-menu-toggle",onClick:()=>{s(!e)},"aria-label":"Toggle mobile menu","aria-expanded":e,children:[(0,o.jsx)("span",{}),(0,o.jsx)("span",{}),(0,o.jsx)("span",{})]})]})]})})}},759:(e,s,t)=>{t.d(s,{A:()=>u});var r=t(722);const a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:8000/api",l=r.A.create({baseURL:a,headers:{"Content-Type":"application/json"},timeout:1e4}),n=e=>{if(!e||"string"!==typeof e)return!1;try{const s=e.split(".");if(3!==s.length)return!1;const t=JSON.parse(atob(s[0]));if(!t.alg||!t.typ)return!1;const r=JSON.parse(atob(s[1])),a=Math.floor(Date.now()/1e3);return r.exp&&r.exp>a}catch(s){return console.error("Token validation error:",s),!1}},o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refreshToken"),sessionStorage.clear(),document.cookie.split(";").forEach((e=>{const s=e.indexOf("="),t=s>-1?e.substr(0,s):e;document.cookie="".concat(t,"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/")}))},i=e=>{var s,t;return e&&"object"===typeof e?{id:e.id,email:e.email,firstname:null===(s=e.firstname)||void 0===s?void 0:s.trim(),lastname:null===(t=e.lastname)||void 0===t?void 0:t.trim(),role:e.role}:null},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e5;const t=new Map;return r=>{const a=Date.now(),l=a-s;t.has(r)||t.set(r,[]);const n=t.get(r).filter((e=>e>l));if(n.length>=e)throw new Error("Trop de tentatives, veuillez patienter");n.push(a),t.set(r,n)}}(5,3e5);l.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(n(s)?e.headers.Authorization="Bearer ".concat(s):(console.warn("Token invalide d\xe9tect\xe9, nettoyage..."),o())),e.headers["X-Request-ID"]="".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),e}),(e=>(console.error("Erreur intercepteur requ\xeate:",e),Promise.reject(e)))),l.interceptors.response.use((e=>e),(e=>{var s;const t=null===(s=e.response)||void 0===s?void 0:s.status;e.config;switch(t){case 401:console.warn("Token expir\xe9 ou invalide"),o();const s=["/login","/register","/","/home"],a=window.location.pathname;s.some((e=>a.includes(e)))||(sessionStorage.setItem("returnUrl",a),window.location.replace("/login"));break;case 403:console.error("Acc\xe8s refus\xe9:",e.response.data);break;case 429:console.warn("Rate limit atteint");break;case 422:console.error("Donn\xe9es invalides:",e.response.data);break;default:var r;if(t>=500)console.error("Erreur serveur:",null===(r=e.response)||void 0===r?void 0:r.data)}return Promise.reject(e)}));const d={register:async e=>{try{if(!e.email||!e.password||!e.firstname||!e.lastname)throw new Error("Tous les champs sont requis");if(e.password.length<8)throw new Error("Le mot de passe doit contenir au moins 8 caract\xe8res");if(!/[A-Z]/.test(e.password))throw new Error("Le mot de passe doit contenir au moins une majuscule");if(!/[0-9]/.test(e.password))throw new Error("Le mot de passe doit contenir au moins un chiffre");const s={email:e.email.trim().toLowerCase(),password:e.password,firstname:e.firstname.trim(),lastname:e.lastname.trim()};return(await l.post("/register",s)).data}catch(t){var s;throw console.error("Erreur inscription:",t),(null===(s=t.response)||void 0===s?void 0:s.data)||{message:t.message}}},login:async e=>{try{if(!e.email||!e.password)throw new Error("Email et mot de passe requis");c(e.email);const s={username:e.email.trim().toLowerCase(),password:e.password},t=await l.post("/login",s),{token:r,user:a,refreshToken:o}=t.data;if(!r||!n(r))throw new Error("Token invalide re\xe7u du serveur");if(localStorage.setItem("token",r),o&&n(o)&&localStorage.setItem("refreshToken",o),a){const e=i(a);e&&localStorage.setItem("user",JSON.stringify(e))}return t.data}catch(t){var s;throw console.error("Erreur connexion:",t),(null===(s=t.response)||void 0===s?void 0:s.data)||{message:t.message}}},logout:async()=>{try{const e=localStorage.getItem("token");e&&n(e)&&await l.post("/logout")}catch(e){console.error("Erreur lors de la d\xe9connexion serveur:",e)}finally{o(),window.location.replace("/login")}},hasToken:()=>{const e=localStorage.getItem("token");return e&&n(e)},isAuthenticated:async()=>{const e=localStorage.getItem("token");if(!e||!n(e))return o(),!1;try{const e=await l.get("/user");if(e.data&&e.data.id)return!0;throw new Error("R\xe9ponse utilisateur invalide")}catch(s){return console.warn("V\xe9rification authentification \xe9chou\xe9e:",s.message),o(),!1}},getToken:()=>{const e=localStorage.getItem("token");return n(e)?e:null},refreshToken:async()=>{try{const e=localStorage.getItem("refreshToken");if(!e||!n(e))throw new Error("Refresh token invalide");const s=await l.post("/refresh-token",{refreshToken:e}),{token:t}=s.data;if(!n(t))throw new Error("Nouveau token invalide");return localStorage.setItem("token",t),t}catch(e){throw console.error("Erreur refresh token:",e),o(),e}},getCurrentUser:()=>{try{const e=localStorage.getItem("user");if(!e)return null;const s=JSON.parse(e);return i(s)}catch(e){return console.error("Erreur parsing utilisateur:",e),localStorage.removeItem("user"),null}},canAccessAdmin:e=>e&&("manager"===e||"responsable_projet"===e),canModifyTasks:e=>"responsable_projet"===e,canManageUsers:e=>"responsable_projet"===e,canManageProject:e=>"responsable_projet"===e,isManager:e=>"manager"===e,isResponsableProjet:e=>"responsable_projet"===e,isCollaborateur:e=>"collaborateur"===e,canAccessAdminGlobally:(e,s)=>!!(e&&Array.isArray(e)&&s)&&e.some((e=>{const t=d.getUserRoleInProject(e,s);return"manager"===t||"responsable_projet"===t})),getAdminAccessibleProjects:(e,s)=>e&&Array.isArray(e)&&s?e.filter((e=>{const t=d.getUserRoleInProject(e,s);return"manager"===t||"responsable_projet"===t})):[],getUserRoleInProject:(e,s)=>{if(!e||!e.users||!s)return null;const t=e.users.find((e=>e.id===s));return(null===t||void 0===t?void 0:t.role)||null},getCurrentUserRole:()=>localStorage.getItem("currentUserRole"),setCurrentUserRole:e=>{e?localStorage.setItem("currentUserRole",e):localStorage.removeItem("currentUserRole")},validatePassword:e=>{const s=/[A-Z]/.test(e),t=/[a-z]/.test(e),r=/\d/.test(e),a=/[!@#$%^&*(),.?":{}|<>]/.test(e),l=[];return e.length<8&&l.push("Au moins ".concat(8," caract\xe8res")),s||l.push("Une majuscule"),t||l.push("Une minuscule"),r||l.push("Un chiffre"),a||l.push("Un caract\xe8re sp\xe9cial"),{isValid:0===l.length,errors:l,strength:0===l.length?"Fort":l.length<=2?"Moyen":"Faible"}}},u=d},838:(e,s,t)=>{t.d(s,{A:()=>a});const r=t(722).A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"},timeout:1e4});r.interceptors.request.use((e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),(e=>Promise.reject(e))),r.interceptors.response.use((e=>e),(e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.replace("/login")),Promise.reject(e)}));const a={getProfile:async()=>{try{return(await r.get("/user")).data}catch(s){var e;throw(null===(e=s.response)||void 0===e?void 0:e.data)||s.message}},updateProfile:async e=>{try{var s,t;const a=await r.put("/user",e);return null!==(s=null===(t=a.data)||void 0===t?void 0:t.user)&&void 0!==s?s:a.data}catch(l){var a;throw(null===(a=l.response)||void 0===a?void 0:a.data)||l.message}}}},987:(e,s,t)=>{t.d(s,{A:()=>o});var r=t(555),a=t(43),l=t(202),n=(t(189),t(579));const o=e=>{let{isOpen:s,onClose:t,onTaskCreated:o,projectId:i,projectUsers:c,projectTasks:d,autoAssign:u=!1}=e;const m=(0,a.useRef)(!1),[h,p]=(0,a.useState)({title:"",description:"",priority:"medium",status:"",skillIds:[],level:"intermediate",estimatedHours:1}),[j,g]=(0,a.useState)([]),[v,x]=(0,a.useState)([]),[k,y]=(0,a.useState)(!1),[f,b]=(0,a.useState)(""),[N,S]=(0,a.useState)(!1),[w,A]=(0,a.useState)({name:"",description:""}),[C,T]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(s){I();const e=JSON.parse(localStorage.getItem("user"));T(e)}}),[s,i]);const I=async()=>{try{const[e,s]=await Promise.all([l.dashboardServices.getAllAvailableProjectSkills(i),l.dashboardServices.getColumns(i)]);g(e.skills||[]),x(s.columns||s||[]);const t=s.columns||s||[];t.length>0&&p((e=>(0,r.A)((0,r.A)({},e),{},{status:t[0].identifier})))}catch(e){console.error("Erreur lors du chargement des donn\xe9es:",e)}},E=e=>{const{name:s,value:t}=e.target;p((e=>(0,r.A)((0,r.A)({},e),{},{[s]:t})))},P=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!s||0===s.length)return null;const a=s.filter((e=>"collaborateur"===e.role||"Collaborateur"===e.role));if(0===a.length)return null;const l=a.filter((s=>{const t=U(e,s.id),a=s.maxWorkloadHours;return t+r<=a}));if(0===l.length)return D(e,a);if(!t||0===t.length)return D(e,l);let n=null,o=-1;return l.forEach((s=>{const a=O(s,t),l=U(e,s.id),i=s.maxWorkloadHours,c=(l+r)/i;let d=0;d=c>=1?0:c>=.9?.1:c>=.75?.3:c>=.5?.6:1;const u=.6*a+.4*d;u>o&&(o=u,n=s)})),n||l[0]},O=(e,s)=>{if(!e.skills||!s||0===s.length)return.5;let t=0;return s.forEach((s=>{e.skills.find((e=>e.id===s))&&t++})),t/s.length},U=(e,s)=>e.filter((e=>e.assignedTo&&("object"===typeof e.assignedTo?e.assignedTo.id===s:e.assignedTo===s))).reduce(((e,s)=>e+(s.estimatedHours||0)),0),D=(e,s)=>{const t={};s.forEach((s=>{t[s.id]=U(e,s.id)}));let r=1/0,a=null;return Object.entries(t).forEach((e=>{let[t,l]=e;l<r&&(r=l,a=s.find((e=>e.id==t)))})),a||s[0]};return s?(0,n.jsx)("div",{className:"modal-overlay",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h2",{children:"Cr\xe9er une t\xe2che"}),(0,n.jsx)("button",{type:"button",className:"modal-close",onClick:t,children:"\xd7"})]}),(0,n.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!k&&!m.current){m.current=!0,y(!0),b("");try{if(!(await l.dashboardServices.getAllAvailableProjectSkills(i)).hasUsers)return b("Aucun collaborateur n'est ajout\xe9 \xe0 ce projet. Veuillez d'abord ajouter des utilisateurs au projet avant de pouvoir cr\xe9er des t\xe2ches."),y(!1),void(m.current=!1);let e=null;if(u&&c&&d){const s=P(d,c,h.skillIds,h.estimatedHours);e=s?s.id:null}const s=(0,r.A)((0,r.A)({},h),{},{projectId:parseInt(i),assignedTo:e}),a=await l.dashboardServices.createTask(s);if(!a.success||!a.task)throw new Error("Erreur lors de la cr\xe9ation de la t\xe2che");o(a.task),p({title:"",description:"",priority:"medium",status:"",skillIds:[],level:"intermediate",estimatedHours:1}),t()}catch(s){b(s.message)}finally{y(!1),m.current=!1}}},className:"modal-form",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"title",children:"Titre *"}),(0,n.jsx)("input",{type:"text",id:"title",name:"title",value:h.title,onChange:E,required:!0,placeholder:"Titre de la t\xe2che..."})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"description",children:"Description"}),(0,n.jsx)("textarea",{id:"description",name:"description",value:h.description,onChange:E,placeholder:"Description de la t\xe2che...",rows:"3"})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"priority",children:"Priorit\xe9"}),(0,n.jsxs)("select",{id:"priority",name:"priority",value:h.priority,onChange:E,children:[(0,n.jsx)("option",{value:"low",children:"Basse"}),(0,n.jsx)("option",{value:"medium",children:"Moyenne"}),(0,n.jsx)("option",{value:"high",children:"Haute"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"level",children:"Niveau requis"}),(0,n.jsxs)("select",{id:"level",name:"level",value:h.level,onChange:E,children:[(0,n.jsx)("option",{value:"beginner",children:"D\xe9butant"}),(0,n.jsx)("option",{value:"intermediate",children:"Interm\xe9diaire"}),(0,n.jsx)("option",{value:"advanced",children:"Avanc\xe9"}),(0,n.jsx)("option",{value:"expert",children:"Expert"})]})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"estimatedHours",children:"Heures estim\xe9es *"}),(0,n.jsx)("input",{type:"number",id:"estimatedHours",name:"estimatedHours",min:"0.5",max:"200",step:"0.5",value:h.estimatedHours,onChange:E,required:!0,placeholder:"Ex: 8"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"status",children:"Statut"}),(0,n.jsx)("select",{id:"status",name:"status",value:h.status,onChange:E,required:!0,children:Array.isArray(v)&&v.map((e=>(0,n.jsx)("option",{value:e.identifier,children:e.name},e.id)))})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Comp\xe9tences requises"}),(0,n.jsx)("div",{className:"skills-labels-container",children:Array.isArray(j)&&j.map((e=>{const s=h.skillIds.includes(e.id),t=(e=>!(!C||!e.createdBy)&&"project_skill"===e.type&&e.createdBy.id===C.id)(e);return(0,n.jsxs)("div",{className:"skill-label ".concat(s?"selected":""," ").concat("project_skill"===e.type?"project-skill":"user-skill"),onClick:()=>{return s=e.id,void p((e=>(0,r.A)((0,r.A)({},e),{},{skillIds:e.skillIds.includes(s)?e.skillIds.filter((e=>e!==s)):[...e.skillIds,s]})));var s},children:[(0,n.jsx)("span",{className:"skill-label-name",children:e.name}),"project_skill"===e.type&&(0,n.jsx)("span",{className:"skill-type-badge",children:"Projet"}),t&&(0,n.jsx)("button",{type:"button",className:"skill-delete-btn",onClick:s=>(async(e,s)=>{if(s.stopPropagation(),window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette comp\xe9tence ?"))try{const s=e.replace("project_","");await l.dashboardServices.deleteProjectSkill(s),g((s=>s.filter((s=>s.id!==e)))),p((s=>(0,r.A)((0,r.A)({},s),{},{skillIds:s.skillIds.filter((s=>s!==e))})))}catch(t){b(t.message)}})(e.id,s),title:"Supprimer cette comp\xe9tence",children:"\xd7"}),s&&(0,n.jsx)("span",{className:"skill-label-check",children:"\u2713"})]},e.id)}))}),!!C&&["responsable_projet","manager"].includes(C.role)&&(0,n.jsx)("div",{className:"skill-management",children:N?(0,n.jsxs)("div",{className:"create-skill-form",children:[(0,n.jsx)("input",{type:"text",placeholder:"Nom de la comp\xe9tence",value:w.name,onChange:e=>A((s=>(0,r.A)((0,r.A)({},s),{},{name:e.target.value})))}),(0,n.jsx)("input",{type:"text",placeholder:"Description (optionnel)",value:w.description,onChange:e=>A((s=>(0,r.A)((0,r.A)({},s),{},{description:e.target.value})))}),(0,n.jsxs)("div",{className:"create-skill-actions",children:[(0,n.jsx)("button",{type:"button",onClick:async()=>{if(w.name.trim())try{const e=(await l.dashboardServices.createProjectSkill(i,w)).skill;g((s=>[...s,e])),p((s=>(0,r.A)((0,r.A)({},s),{},{skillIds:[...s.skillIds,e.id]}))),A({name:"",description:""}),S(!1)}catch(e){b(e.message)}else b("Le nom de la comp\xe9tence est requis")},className:"btn-save-skill",children:"Ajouter"}),(0,n.jsx)("button",{type:"button",onClick:()=>{S(!1),A({name:"",description:""})},className:"btn-cancel-skill",children:"Annuler"})]})]}):(0,n.jsx)("button",{type:"button",className:"btn-add-skill",onClick:()=>S(!0),children:"+ Ajouter une comp\xe9tence au projet"})}),0===h.skillIds.length&&(0,n.jsx)("p",{className:"no-skills-selected",children:"Aucune comp\xe9tence s\xe9lectionn\xe9e. Cliquez sur les \xe9tiquettes pour les s\xe9lectionner."}),h.skillIds.length>0&&(0,n.jsx)("div",{className:"selected-skills-summary",children:(0,n.jsxs)("span",{className:"selected-count",children:[h.skillIds.length," comp\xe9tence",h.skillIds.length>1?"s":""," s\xe9lectionn\xe9e",h.skillIds.length>1?"s":""]})}),(0,n.jsx)("button",{type:"button",className:"btn-add-skill",onClick:()=>S(!N),children:N?"Annuler":"+ Ajouter une comp\xe9tence"}),N&&(0,n.jsxs)("div",{className:"add-skill-form",children:[(0,n.jsx)("h4",{children:"Cr\xe9er une nouvelle comp\xe9tence"}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Nom *"}),(0,n.jsx)("input",{type:"text",value:w.name,onChange:e=>A((s=>(0,r.A)((0,r.A)({},s),{},{name:e.target.value}))),placeholder:"Nom de la comp\xe9tence..."})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Description"}),(0,n.jsx)("textarea",{value:w.description,onChange:e=>A((s=>(0,r.A)((0,r.A)({},s),{},{description:e.target.value}))),placeholder:"Description de la comp\xe9tence...",rows:"2"})]}),(0,n.jsx)("button",{type:"button",className:"btn-primary",onClick:async e=>{if(e.preventDefault(),w.name)try{const e={name:w.name,description:w.description},s=(await l.dashboardServices.createSkill(e)).skill;g((e=>[...e,s])),p((e=>(0,r.A)((0,r.A)({},e),{},{skillIds:[...e.skillIds,s.id]}))),A({name:"",description:""}),S(!1)}catch(s){b(s.message)}else b("Le nom de la comp\xe9tence est requis")},children:"Cr\xe9er la comp\xe9tence"})]})]}),f&&(0,n.jsx)("div",{className:"error-message",children:f}),(0,n.jsxs)("div",{className:"modal-actions",children:[(0,n.jsx)("button",{type:"button",className:"btn-secondary",onClick:t,children:"Annuler"}),(0,n.jsx)("button",{type:"submit",className:"btn-primary",disabled:k,children:k?"Cr\xe9ation...":"Cr\xe9er la t\xe2che"})]})]})]})}):null}}}]);
//# sourceMappingURL=769.29cdf676.chunk.js.map